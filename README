# multi-nic-bw-checker

A simple containerized Go app to check max bandwidth across all pod interfaces using `iperf3`.

## ðŸ”§ Build

```bash
make build

```Run server in one pod:


env:
- name: IPERF_MODE
  value: "server"

```Run client in another:


env:
- name: IPERF_MODE
  value: "client"
- name: TARGET_IP
  value: "SERVER_IP"

```Test run

kubectl logs bw-client

Testing bandwidth to 192.168.61.4 for 10 seconds
Connecting to host 192.168.61.4, port 5201
[  5] local 192.168.7.15 port 45708 connected to 192.168.61.4 port 5201
[ ID] Interval           Transfer     Bitrate         Retr  Cwnd
[  5]   0.00-1.00   sec   594 MBytes  4.98 Gbits/sec    0   3.14 MBytes       
[  5]   1.00-2.00   sec   592 MBytes  4.97 Gbits/sec    0   3.14 MBytes       
[  5]   2.00-3.00   sec   592 MBytes  4.97 Gbits/sec    0   3.14 MBytes       
[  5]   3.00-4.00   sec   592 MBytes  4.97 Gbits/sec    0   3.14 MBytes       
[  5]   4.00-5.00   sec   591 MBytes  4.96 Gbits/sec    0   3.14 MBytes       
[  5]   5.00-6.00   sec   592 MBytes  4.97 Gbits/sec    1   3.14 MBytes       
[  5]   6.00-7.00   sec   592 MBytes  4.97 Gbits/sec    0   3.14 MBytes       
[  5]   7.00-8.00   sec   592 MBytes  4.97 Gbits/sec    0   3.14 MBytes       
[  5]   8.00-9.00   sec   592 MBytes  4.97 Gbits/sec    0   3.14 MBytes       
[  5]   9.00-10.00  sec   591 MBytes  4.96 Gbits/sec    0   3.14 MBytes       
- - - - - - - - - - - - - - - - - - - - - - - - -
[ ID] Interval           Transfer     Bitrate         Retr
[  5]   0.00-10.00  sec  5.79 GBytes  4.97 Gbits/sec    1             sender
[  5]   0.00-10.04  sec  5.78 GBytes  4.95 Gbits/sec                  receiver

iperf Done.

